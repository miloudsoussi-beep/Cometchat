<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Chat en ligne</title>

    <!-- CometChat Chat Widget (Embed) -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@cometchat/chat-embed@1.x.x/dist/main.js"
    ></script>

    <style>
      body {
        font-family: Georgia, serif;
        margin: 0;
        padding: 0;
      }
      h1 {
        margin: 30px;
        font-size: 48px;
      }
      #cometChatMount {
        min-height: 650px;
      }
    </style>
  </head>

  <body>
    <h1>Chat en ligne</h1>

    <!-- Là où le widget doit se monter -->
    <div id="cometChatMount"></div>

    <script type="module">
      // ✅ Mets TES valeurs ici
      const COMETCHAT_WIDGET_CONFIG = {
        appID: "167562823bae0e59a",
        region: "eu",

        // Mode invité (OK pour test)
        mode: "guest",
        authKey: "d17e17ba71914e829f39816985b294907135a441", // ⚠️ évite de le laisser sur un repo public

        // Optionnel : profil “guest”
        user: {
          name: "Visiteur",
          avatar: "",
          link: "",
        },

        // Placement / taille
        mount: "#cometChatMount",
        width: "450px",
        height: "80vh",
        isDocked: true,

        // ✅ Ton Variant ID (important sinon “Widget settings not found”)
        variantID: "69a1bc3a217a8080a6446649",
      };

      // Attendre que le script CometChat soit chargé (defer)
      function startWhenReady() {
        if (window.CometChatApp?.CometChatAuth?.start) {
          window.CometChatApp.CometChatAuth.start(COMETCHAT_WIDGET_CONFIG);
          console.log("CometChat: initialisé");
        } else {
          setTimeout(startWhenReady, 50);
        }
      }

      startWhenReady();
    </script>
  </body>
</html>
